- name: check fzf
  stat:
    path: '{{ home_path }}/.fzf'
  register: fzf_stat
  changed_when: False

- block:
  - name: clone fzf
    git:
      repo:  https://github.com/junegunn/fzf.git
      dest:  '{{ home_path }}/.fzf'
      depth: 1

  - name: install fzf
    command: |
      '{{ home_path }}/.fzf/install'
  when: not fzf_stat.stat.exists

- name: check emojify
  stat:
    path: '/usr/local/bin/emojify'
  register: emojify_stat
  changed_when: False

- name: install emojify
  shell: |
    'sudo sh -c "curl https://raw.githubusercontent.com/mrowa44/emojify/master/emojify -o /usr/local/bin/emojify && chmod +x /usr/local/bin/emojify"'
  when: not emojify_stat.stat.exists

- name: check installed emoji-fish
  stat:
    path: '{{ home_path }}/.emoji-fish'
  register: emoji_fish_stat

- name: check ssh
  stat:
    path: '{{ home_path }}/.ssh/id_rsa.pub'
  register: ssh_stat

- block:
  - name: install emoji-fish
    git:
      repo:  https://github.com/shinshu68/emoji-fish.git
      dest: '{{ home_path }}/.emoji-fish'

  - name: clone emoji-fish
    git:
      repo: git@github.com:shinshu68/emoji-fish.git
      dest: '{{ home_path }}/workspace/emoji-fish'

  - name: create emoji-fish symlink
    file:
      src:   '{{ home_path }}/.emoji-fish/emoji-fish.fish'
      dest:  '{{ home_path }}/.config/fish/functions/emoji-fish.fish'
      owner: '{{ user_name }}'
      group: '{{ user_name }}'
      state: link
      force: yes
  when: not emoji_fish_stat.stat.exists and ssh_stat.stat.exists

- name: check shinshu_works
  stat:
    path: '{{ home_path }}/shinshu_works'
  register: shinshu_works_stat

- block:
  - name: clone shinshu_works
    git:
      repo: git@github.com:toyota-ct-selab/shinshu_works.git
      dest: '{{ home_path }}/shinshu_works'
  when: not shinshu_works_stat.stat.exists and ssh_stat.stat.exists
